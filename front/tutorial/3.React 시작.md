# React 시작

- 구성 확인
  - App.js 및 index.js



### 구성 확인

---

- **App.js**

```js
import React from 'react';

function App() {
	return (<div className="App"/>);
}

export default App;
```

- **index.js**

```js
*import* React *from* 'react';
*import* ReactDOM *from* 'react-dom';
*import* App *from* './App';

ReactDOM.render(
 <React.StrictMode>
  <App />
 </React.StrictMode>,
 document.getElementById('root')
);
```



---

- **JSX**

```jsx
const element = <h1>Hello, world!</h1>;
```

위 예제의 특이한 문법은 JSX라고 하며, JavaScript를 확장한 문법이다. 

JSX는 React element를 생성합니다. (console.log에 위와 같이 만들어진 element를 넣으면 확인할 수 있다.)



----

- **Component**

React는 화면 및 동작에 정의되는 모든 요소를 Component라고 한다. 

Component를 구현하는 방법은 다음과 같다.

- Function Component예제

```js
function App() {
	return<h3>Hello Function Component! <h3>
}
export default App();
```



- Class Component예제

Function Component와 다르게 React.Component를 상속받는다.  React.Component는 props, state, render()등 다양한 메소드와 속성을 제공한다.

```js
import React from "react";

class App() extends React.Component{
	render() {
		return <h1>Hello Class Component! </h1>
	}
}
export default App;
```



---

- **Property & State**

  - props : 상위 컴포넌트에게 전달 받은 값이 담겨져있다. props 읽기 전용이다.

  ```js
  import React from "react";
  
  function House(text, image) {
      return <h1> Text: {text} Image: {image} </h1>
  }
  
  function Home(props) {
  	return <h1> {props.text} </h1>
  }
  
  export default class App extends React.Component {
  	render() {
  		<div>
  			<Home text="Text" />
              <House text="Text" image="image"/>
  		</div>
  	}
  }
  ```

  

  - state: Component에 지속적으로 변화해야하는 속성을 저장하는 공간.  수정 가능.

  ```js
  import React from "react";
  
  export default class App extends React.Component {
  	state = {
  		ex_count: 0
    };
    
    add = () => { this.setState({ex_count: this.state.ex_count + 1})};    //외부 state에 대한 의존도가 높은 코드라 피하는 것이 좋다.
    minus = () => { this.setState(current => ({ex_count: current.ex_count - 1})) }; // 현재 state를 가져오는 방법. 
  
  	render() {
  		return (<div>
              <h1> Hello State ex_count: {this.state.ex_count} </h1>
          	<button onClick={this.add}>Add</button>     //JavaScript에서 onClick 및 eventListener를 대신 등록해준다.
          	<button onClick={this.minus}>Minus</button> // onClick에게 함수를 넘겨줄 때 this.minus는 클릭이벤트 시에 함수 호출이고,
                                                          // this.minus()는 함수가 바로 호출된다.
  		</div>);
  	}
  }
  ```

  

props와 state의 내용이 변경되면 컴포넌트는 자동으로 render() 함수가 수행된다.



- Issue 사항

만약 state를 직접 수정하려 한다면 어떻게 될까?

```
this.state.ex_count = 9999;
```

이러한 코드를 작성 시 다음과 같은 오류를 확인할 수 있다.

![state 에러메시지](https://user-images.githubusercontent.com/22608825/85135871-c12d9b80-b279-11ea-9589-8556fb6a0f5c.PNG)



state를 직접 변경하더라도 render() 함수가 호출된 것이 아니기 때문에 화면 갱신은 되지않으므로, 직접 state를 변경하지 마시오. 라는 메시지를 확인할 수 있다.

이를 해결하기 위해선 원래 예제대로 setState를 호출해야한다.

setState의 인자로는 새로운 state를 받아야하며, state는 object 라는 것을 기억하며 작성하면 된다.

---

- **Map**

React의 Map의 동작은 JavaScript와 동일하다. 배열의 각 Item을 하나하나 적용하고 총 결과를 리스트로 반환하는 방법이다.

```js
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map((number) => number * 2);
console.log(doubled);

result : [2, 4, 6, 8, 10]
```

이 점을 이용하여 Component를 반복하여 사용하더라도, 각기 다른 화면을 보여줄 수 있다.

```js
{data.map(obj => (
    <Home key={obj.id} 
          name={obj.name} 
		  image={obj.image}
		  rating={obj.rating}
/>))}
```



하지만 아래와 같은 문제가 발생하게 된다.

![react map 사용 시 발생하는 오류](https://user-images.githubusercontent.com/22608825/85030360-51a3a780-b1b8-11ea-9bb2-b14648dc24d0.PNG)

이는 컴포넌트에 props를 리스트로 변환하여 주입 시 unique한 key prop를 갖고 있지 않아 생기는 문제이다.

해결하기 위해선 각 데이터의 unique한 key를 추가시키면 된다.

예시

```js
{
	name: "커버낫",
	image:"1"
},
{
	name: "내셔널지오그래픽",
	image: "2"
 },
```

변경 후

```js
{
	id:1
	name: "커버낫",
	image:"1"
},
{
	id:2
	name: "내셔널지오그래픽",
	image: "2"
 },
```



### **PropTypes**

-----------

상위 컴포넌트에게 전달받은 props가 내가 원하는 타입의 props인지 확인해주는 모듈

```
npm install prop-types
```

설치 확인

![prop-types 설치 확인 사진](https://user-images.githubusercontent.com/22608825/85026931-45b5e680-b1b4-11ea-9793-f8624c35c8c1.PNG)



사용법

- 사용할  js에 모듈 추가

```js
import React from 'react';
import PropTypes from "prop-types";
```

- 사용 예시를 위한 데이터

```js
const data = [
	name: "hi",
	image: "image path",
	rating: 5
];
```



사진처럼 rating은 number 타입이고 , name, image는 string 타입으로 정의되어있다.

- 사용 예시

```js
Home.propTypes = {
	name: PropTypes.string.isRequired,
	image: PropTypes.string.isRequired,
	rating: PropTypes.string.isRequired,    
}
```



name, image, rating은 string 타입 이다. 라고 propTypes을 정의한 것이다. 하지만 적용될 데이터 중 rating은 number 타입 이므로 다음과 같은 console log를 확인할 수 있다. 

![prop-types를 사용하여 발생한 에러](https://user-images.githubusercontent.com/22608825/85027449-e73d3800-b1b4-11ea-992a-21c379e1a1ab.PNG)

단 console log를 통한 warning이 발생하더라도, 실제 프로그램 동작에 문제는 없다.

